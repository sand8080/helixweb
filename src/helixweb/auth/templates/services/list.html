{% extends "base_auth.html" %}

{% load i18n %}

{% block title %}{% trans "services list" %}{% endblock %}

{% block content %}

<script type="text/javascript" src="/static/js/utils.js"></script>

<h3>{% trans "services" %}</h3>

<form action="." method="get">
    <table class="filter_object center">

        {{ filter_service_form.as_table }}

        <tr>
            <td colspan="2" class="control">
                <input type="submit" value={% trans "filter" %} />
            </td>

        </tr>
    </table>
</form>

<br>

<p>
    {% load localeurl_tags %}
    {% trans "total" %}: {{ services|length }} <a href="{{ "/auth/services/add/"|chlocale:cur_lang }}">{% trans "add service" %}</a>
</p>

{% if services_error %}

    <span class="errormessage">{% trans services_error %}</span>

{% else %}


    {% if services %}

        <table class="objects_list">
            <tr class="objects_fields">
                <th>{% trans "service name" %}</th>
                <th>{% trans "type" %}</th>
                <th>{% trans "is active" %}</th>
                <th>{% trans "is possible to disable" %}</th>
                <th>{% trans "functions" %}</th>
            </tr>

            {% for srv in services %}
                <tr class="objects_data">
                    <td><a href="/auth/services/{{ srv.id }}">{{ srv.name }}</a></td>
                    <td>{{ srv.type }}</td>
                    <td>{{ srv.is_active }}</td>
                    <td>{{ srv.is_possible_deactiate }}</td>
                    <td>

                        <a href="#" id="props_{{ srv.id }}">[+]</a>
                        <div id="props_list_{{ srv.id }}" style="display:none;">
                            {{ srv.properties|unordered_list }}
                        </div>

                        <script type="text/javascript">
                            slider('props_{{ srv.id }}', 'props_list_{{ srv.id }}')
                        </script>

                    </td>
                </tr>
            {% endfor %}
        </table>

    {% else %}

        <table>
            <tr><th>{% trans "no services" %}</th></tr>
        </table>

    {% endif %}

{% endif %}

{% endblock %}